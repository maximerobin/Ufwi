# File generated by EdenWall: {{ _generation_time_ }}

[global]
daemon = 0
log_to_file = 1
log_to_stdout = 0
socket = {{ socket }}
pid_file = /var/run/nnd/nnd.pid
log_file = /var/log/nnd/nnd.log
domains = {{ domain_list }}
default_domain = {{ default_domain }}
log_level = {{ log_level }}
ldap_log_level = {{ ldap_log_level }}
version = 1

{% for domain in domains %}
{%- set domain_index = loop.index %}
[domain{{ domain_index }}]
label = {{ domain.label }}
{%- if  domain.type_ %}
type = {{ domain.type_ | lower }}
{%- endif %}
realm = {{ domain.realm }}
user_base_dn = {{ domain.user_base_dn }}
{%- if  domain.user_filter %}
user_filter = {{ domain.user_filter }}
{%- endif %}
{%- if  domain.user_member_attr %}
user_member_attr = {{ domain.user_member_attr }}
{%- endif %}
{%- if  domain.group_attr_name %}
group_attr_name = {{ domain.group_attr_name }}
{%- endif %}
group_base_dn = {{ domain.group_base_dn }}
{%- if  domain.group_enum_filter %}
group_enum_filter = {{ domain.group_enum_filter }}
{%- endif %}
{%- if  domain.group_filter %}
group_filter = {{ domain.group_filter }}
{%- endif %}
{%- if  domain.group_member_attr %}
group_member_attr = {{ domain.group_member_attr }}
{%- endif %}
servers = {{ domain.server_list }}


{% for server in domain.servers %}
[server{{ domain_index }}.{{ loop.index }}]
label = {{ server.label }}
ldapuri = {{ server.ldapuri }}
{%- if server.bind_dn %}
bind_dn = {{ server.bind_dn }}
{%- endif %}
{%- if server.bind_pw %}
bind_pw = {{ server.bind_pw }}
{%- endif %}
{%- if server.tls %}
tls = {{ server.tls }}
{%- endif %}
{%- if server.checkcert %}
checkcert = {{ server.checkcert }}
{%- endif %}
{%- if server.ca_path %}
ca_path = {{ server.ca_path }}
{%- endif %}
{%- if server.user_base_dn %}
user_base_dn = {{ server.user_base_dn }}
{%- endif %}
{%- if server.user_filter %}
user_filter = {{ server.user_filter }}
{%- endif %}
{%- if server.user_member_attr %}
user_member_attr = {{ server.user_member_attr }}
{%- endif %}
{%- if server.group_attr_name %}
group_attr_name = {{ server.group_attr_name }}
{%- endif %}
{%- if server.group_base_dn %}
group_base_dn = {{ server.group_base_dn }}
{%- endif %}
{%- if server.group_enum_filter %}
group_enum_filter = {{ server.group_enum_filter }}
{%- endif %}
{%- if server.group_filter %}
group_filter = {{ server.group_filter }}
{%- endif %}
{%- if server.group_member_attr %}
group_member_attr = {{ server.group_member_attr }}
{%- endif %}
{% endfor %}
{% endfor %}
