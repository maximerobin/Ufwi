# File generated by EdenWall: {{ _generation_time_ }}
#
# CONFIG FILE FOR SQUIDGUARD
#

dbhome /var/lib/squidguard/db
logdir /var/log/squid

{% for dest in squidguard_conf_dests %}
dest {{ dest.name }} {
{% for file in dest.files -%}
  {{ file }}
{% endfor %}
}
{% endfor %}

dest custom_whitelist {
  domainlist custom/whitelist.domains
  urllist custom/whitelist.urls
}

dest custom_blacklist {
  domainlist custom/blacklist.domains
  urllist custom/blacklist.urls
}

acl {
	default {
		pass	 custom_whitelist {% if conf.whitelist_mode %}none{% else %}!custom_blacklist{% for category_name in conf.categories_blacklist %} !{{ category_name }}{% endfor %}{% endif %}
		redirect http://localhost/blocked.php?url=%u&dest_bl=%t
	}
}

